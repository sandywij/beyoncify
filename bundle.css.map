{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte",
    "../src/Graph.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport * as d3 from \"d3\";\n\timport Graph from './Graph.svelte';\n\n\tlet spotifyUri = \"5IVuqXILoxVWvWEPm82Jxr\";\n\tlet svg;\n\tlet width = 500;\n\tlet height = 200;\n\tlet playing = \"Crazy in Love\";\n\n\tfunction loadData(){\n\t\tconst data = d3.csv('data.csv').then((d)=>{\n\n\t\t\tconst album = d3.nest()\n\t\t\t\t\t\t\t\t\t\t\t.key(function(d) { return d.album; })\n\t\t\t\t\t\t\t\t\t\t\t.entries(d);\n\t\t\treturn album;\n\t\t})\n\t\treturn data;\n\t}\n\n\tlet promise = loadData();\n\n\tconst qualities = [\n\t{ id: 'danceability',   color: \"#d53e4f\"   },\n\t{ id: 'energy', color: \"#fc8d59\" },\n\t{ id: 'valence',  color: \"#e6f598\"  },\n\t{ id: 'speechiness',   color: \"#99d594\"   },\n\t{ id: 'acousticness', color: \"#3288bd\" },\n\t{ id: 'instrumentalness',  color: \"#756bb1\" }\n];\n\n\n</script>\n\n<style>\n\n\t.legend {\n\t\twidth: 100%;\n\t\tbackground-color: #FEE290;\n\t\tposition: -webkit-sticky; /* Safari */\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tdisplay: flex;\n\t\talign-items: baseline;\n\t\tjustify-content: space-around;\n\t\tfont-size: 0.8em;\n\t}\n\n\t.key {\n\t\twidth:80%;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: space-around;\n\t\ttext-align: center;\n\t}\n\n\t.sub-key{\n\t\tdisplay: inline-flex;\n\t\talign-items: baseline;\n\t\tflex-wrap: nowrap;\n\t}\n\n\t.sub-key > *{\n\t\tpadding-left: 1em;\n\t}\n\n\trect {\n\t\tmix-blend-mode: multiply;\n\t}\n\n\t.viz-container {\n\t\twidth:100%;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: space-around;\n\t\ttext-align: center;\n\t}\n\n\t#music-player {\n\t\tposition:fixed;\n\t\t\t\t left:0px;\n\t\t\t\t bottom:0px;\n\t\t\t\t height: auto;\n\t\t\t\t width: auto;\n\t}\n\n\t#music-player p{\n\t\tfont-size: 0.8em;\n\t}\n\n\n</style>\n\n<div class=\"main-container\">\n\t<div class=\"legend\">\n\t\t<div>\n\t\t\t<h1>B</h1>\n\t\t</div>\n\t\t<div>\n\t\t\t<p>Key:</p>\n\t\t</div>\n\n\n\t\t<div class=\"key\">\n\t\t\t{#each qualities as q}\n\t\t\t<div class=\"sub-key\" id=q>\n\t\t\t\t<svg width=\"10\" height=\"10\">\n\t\t\t\t\t<rect width=\"10\" height=\"10\" fill={q.color}></rect>\n\t\t\t\t</svg>\n\t\t\t\t<p>{q.id}</p>\n\t\t\t</div>\n\t\t\t{/each}\n\t\t</div>\n\t</div>\n\n\t<div class=\"viz-container\">\n\t\t{#await promise}\n\t\t\t<p>...loading</p>\n\t\t{:then data}\n\t\t{#each data as d}\n\t\t<Graph data={d} qualities={qualities} bind:spotifyUri bind:playing/>\n\t\t{/each}\n\t\t{:catch error}\n\t\t\t<p style=\"color: red\">Didn't load :(</p>\n\t\t{/await}\n\t</div>\n\n\n\t<div id=\"music-player\">\n\n\t<iframe src=\"https://open.spotify.com/embed/track/{spotifyUri}\" width=\"80\" height=\"80\" frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\"></iframe>\n\t\t<p>Track: {playing}</p>\n\t</div>\n</div>\n",
    "<script>\n  import * as d3 from \"d3\";\n\n  export let spotifyUri;\n  export let playing;\n  export let data;\n  export let qualities;\n\n  const r = 80;\n\n  const width = 360;\n  const height = 360;\n  const midPoint = {x: width/2, y:height/2};\n  const circleEdge = width/2 - r;\n\n  $: albumData = data.values;\n\n\n  function tooltip(node, text) {\n\t\tconst tooltip = document.createElement('div');\n\t\ttooltip.textContent = text;\n\n\t\tObject.assign(tooltip.style, {\n\t\t\tposition: 'absolute',\n\t\t\tbackground: 'black',\n\t\t\tcolor: 'white',\n\t\t\tpadding: '0.5em 1em',\n\t\t\tfontSize: '12px',\n\t\t\tpointerEvents: 'none',\n\t\t\ttransform: 'translate(5px, -50%)',\n\t\t\tborderRadius: '2px',\n\t\t\ttransition: 'opacity 0.4s'\n\t\t});\n\n\n\t\tfunction append(event) {\n\t\t\tdocument.body.appendChild(tooltip);\n\t\t\ttooltip.style.opacity = 0;\n\t\t\tsetTimeout(() => tooltip.style.opacity = 1);\n      tooltip.style.top = `${event.pageY}px`;\n      tooltip.style.left = `${event.pageX}px`;\n\t\t}\n\n\t\tfunction remove() {\n\t\t\ttooltip.remove();\n\t\t}\n\n\t\tnode.addEventListener('mouseenter', append);\n\t\tnode.addEventListener('mouseleave', remove);\n\n\t\treturn {\n\t\t\tupdate(text) {\n\t\t\t\ttooltip.textContent = text;\n\t\t\t\tposition();\n\t\t\t},\n\n\t\t\tdestroy() {\n\t\t\t\ttooltip.remove();\n\t\t\t\tnode.removeEventListener('mouseenter', append);\n\t\t\t\tnode.removeEventListener('mouseleave', remove);\n\t\t\t}\n\t\t};\n\t}\n\n\n\n\n\n</script>\n\n<style>\n  line {\n    mix-blend-mode: multiply;\n  }\n</style>\n\n<div class=\"graphs\">\n  <p>{data.key}</p>\n\n<svg width ={width} height={height}>\n\n{#each albumData as d, di}\n<g on:click={()=>{spotifyUri = d.id; playing = d.songtitle;}} use:tooltip={d.songtitle} >\n  <line x1={midPoint.x} x2={midPoint.x} y1={circleEdge} y2={circleEdge-d.duration_ms/3000} stroke-width=\"2\" stroke=\"#A0A0A0\" transform=\"rotate({di/albumData.length * 360} {midPoint.x} {midPoint.y})\"></line>\n  {#each qualities as q, qi}\n  <line x1={midPoint.x - d[q.id]*25} x2={midPoint.x + d[q.id]*25} y1={0.9*circleEdge -qi/6 * 3 * d.duration_ms/10000} y2={0.9*circleEdge -qi/6 * 3 * d.duration_ms/10000} stroke-width={d[q.id]*20} stroke={q.color} transform=\"rotate({di/albumData.length * 360} {midPoint.x} {midPoint.y})\"></line>\n  {/each}\n  </g>\n{/each}\n\n<defs>\n    <clipPath id=\"img-{data.values[0].id}\">\n        <circle cx={midPoint.x} cy={midPoint.y} r={r}></circle>\n    </clipPath>\n </defs>\n\n <image width={r*2} height={r*2} x={midPoint.x-r} y={midPoint.y-r} xlink:href=\"img/{data.values[0].slug}.png\" clip-path=\"url(#img-{data.values[0].id}\" />\n\n\n</svg>\n</div>\n"
  ],
  "names": [],
  "mappings": "AAqCC,OAAO,cAAC,CAAC,AACR,KAAK,CAAE,IAAI,CACX,gBAAgB,CAAE,OAAO,CACzB,QAAQ,CAAE,cAAc,CACxB,QAAQ,CAAE,MAAM,CAChB,GAAG,CAAE,CAAC,CACN,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,QAAQ,CACrB,eAAe,CAAE,YAAY,CAC7B,SAAS,CAAE,KAAK,AACjB,CAAC,AAED,IAAI,cAAC,CAAC,AACL,MAAM,GAAG,CACT,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,eAAe,CAAE,YAAY,CAC7B,UAAU,CAAE,MAAM,AACnB,CAAC,AAED,sBAAQ,CAAC,AACR,OAAO,CAAE,WAAW,CACpB,WAAW,CAAE,QAAQ,CACrB,SAAS,CAAE,MAAM,AAClB,CAAC,AAED,sBAAQ,CAAG,cAAC,CAAC,AACZ,YAAY,CAAE,GAAG,AAClB,CAAC,AAED,IAAI,cAAC,CAAC,AACL,cAAc,CAAE,QAAQ,AACzB,CAAC,AAED,cAAc,cAAC,CAAC,AACf,MAAM,IAAI,CACV,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,eAAe,CAAE,YAAY,CAC7B,UAAU,CAAE,MAAM,AACnB,CAAC,AAED,aAAa,cAAC,CAAC,AACd,SAAS,KAAK,CACX,KAAK,GAAG,CACR,OAAO,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACf,CAAC,AAED,2BAAa,CAAC,eAAC,CAAC,AACf,SAAS,CAAE,KAAK,AACjB,CAAC;AClBA,IAAI,eAAC,CAAC,AACJ,cAAc,CAAE,QAAQ,AAC1B,CAAC"
}