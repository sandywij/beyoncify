{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte",
    "../src/Graph.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import * as d3 from \"d3\";\n  import Graph from \"./Graph.svelte\";\n\n  let spotifyUri = \"5IVuqXILoxVWvWEPm82Jxr\";\n  let svg;\n  let width = 500;\n  let height = 200;\n  let playing = \"Crazy in Love\";\n\n  function loadData() {\n    const data = d3.csv(\"data.csv\").then(d => {\n      const album = d3\n        .nest()\n        .key(function(d) {\n          return d.album;\n        })\n        .entries(d);\n      return album;\n    });\n    return data;\n  }\n\n  let promise = loadData();\n\n  const qualities = [\n    { id: \"danceability\", color: \"#d53e4f\" },\n    { id: \"energy\", color: \"#fc8d59\" },\n    { id: \"valence\", color: \"#ffe200\" },\n    { id: \"speechiness\", color: \"#99d594\" },\n    { id: \"acousticness\", color: \"#3288bd\" },\n    { id: \"instrumentalness\", color: \"#756bb1\" }\n  ];\n</script>\n\n<style>\n  .center {\n    width: 100%;\n    max-width: 600px;\n    margin: auto;\n    text-align: center;\n    padding: 1em 0em;\n  }\n\n  .analysis {\n    max-width: 600px;\n    width: 80%;\n    margin: auto;\n    line-height: 1.5em;\n  }\n\n  .legend {\n    width: 100%;\n    background-color: #ffffc1;\n    position: -webkit-sticky; /* Safari */\n    position: sticky;\n    top: 0;\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    font-size: 0.8em;\n    height: 100px;\n  }\n\n  .key {\n    width: 80%;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-around;\n    text-align: center;\n  }\n\n  .sub-key {\n    display: inline-flex;\n    align-items: baseline;\n    flex-wrap: nowrap;\n  }\n\n  .sub-key > * {\n    padding-left: 1em;\n  }\n\n  @media screen and (min-width: 600px) {\n    rect {\n      mix-blend-mode: multiply;\n    }\n  }\n\n  @media screen and (max-width: 600px) {\n    rect {\n      opacity: 0.9;\n    }\n  }\n\n  .viz-container {\n    width: 100%;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-around;\n    text-align: center;\n    margin-bottom: 100px;\n  }\n\n  #music-player {\n    position: fixed;\n    left: 0px;\n    bottom: 0px;\n    height: auto;\n    width: auto;\n  }\n\n  #music-player p {\n    font-size: 0.8em;\n  }\n</style>\n\n<div class=\"main-container\">\n\n  <div class=\"center\">\n\n    <h1>Beyoncify</h1>\n    <a\n      style=\"font-size:12px; font-family:'Open Sans';\"\n      href=\"https://www.sandywij.com/\">\n      Sandy Guberti Ng\n    </a>\n  </div>\n\n  <div class=\"center\">\n\n    <p>\n      Patiently waiting for my demise\n      <br />\n      Cause my success can't be quantified\n      <br />\n      If I gave two fucks, two fucks about streaming numbers\n      <br />\n      Would have put Lemonade up on Spotify\n    </p>\n  </div>\n\n  \n\n  <div class=\"legend\">\n\n    <div>\n      <p>Key:</p>\n    </div>\n\n    <div class=\"key\">\n      {#each qualities as q}\n        <div class=\"sub-key\" id=\"q\">\n          <svg width=\"10\" height=\"10\">\n            <rect width=\"10\" height=\"10\" fill={q.color} />\n          </svg>\n          <p>{q.id}</p>\n        </div>\n      {/each}\n    </div>\n  </div>\n\n  <div>\n\n    <div class=\"center\">\n      <p>\n        <strong>Click to play track.</strong>\n      </p>\n    </div>\n\n    <div class=\"viz-container\">\n      {#await promise}\n        <p>...loading</p>\n      {:then data}\n        {#each data as d}\n          <Graph data={d} {qualities} bind:spotifyUri bind:playing />\n        {/each}\n      {:catch error}\n        <p style=\"color: red\">Didn't load :(</p>\n      {/await}\n    </div>\n  </div>\n  <div id=\"music-player\">\n\n    <iframe\n      src=\"https://open.spotify.com/embed/track/{spotifyUri}\"\n      width=\"80\"\n      height=\"80\"\n      frameborder=\"0\"\n      allowtransparency=\"true\"\n      allow=\"encrypted-media\" />\n    <p>Track: {playing}</p>\n  </div>\n\n\n\n<div class=\"analysis\">\n    <p>\n      Since Lemonade’s release on April 23 2016, it had been exclusively\n      available on Tidal. Three years after its release, it is now finally\n      available on other streaming platforms — including Spotify.\n    </p>\n\n        <p>\n      For every track in Spotify’s catalog, runs a suite of audio analysis\n      algorithms. These extract about a dozen high-level acoustic attributes\n      from the audio.\n    </p>\n\n    <p>\n      In this visualization shows seven attributes that were available on\n      Spotify’s API: Duration, Danceability, Energy, Valence, Speechiness,\n      Acousticness, Instrumentalness. With the exception of Duration, all the\n      attributes are measures from 0.0 to 1.0.\n    </p>\n  </div>\n\n</div>\n",
    "<script>\n  import * as d3 from \"d3\";\n\n  export let spotifyUri;\n  export let playing;\n  export let data;\n  export let qualities;\n\n  const r = 80;\n\n  const width = 360;\n  const height = 360;\n  const midPoint = {x: width/2, y:height/2};\n  const circleEdge = width/2 - r;\n\n  $: albumData = data.values;\n\n\n  function tooltip(node, text) {\n\t\tconst tooltip = document.createElement('div');\n\t\ttooltip.textContent = text;\n\n\t\tObject.assign(tooltip.style, {\n\t\t\tposition: 'absolute',\n\t\t\tbackground: 'black',\n\t\t\tcolor: 'white',\n\t\t\tpadding: '0.5em 1em',\n\t\t\tfontSize: '12px',\n\t\t\tpointerEvents: 'none',\n\t\t\ttransform: 'translate(5px, -50%)',\n\t\t\tborderRadius: '2px',\n\t\t\ttransition: 'opacity 0.4s'\n\t\t});\n\n\n\t\tfunction append(event) {\n\t\t\tdocument.body.appendChild(tooltip);\n\t\t\ttooltip.style.opacity = 0;\n\t\t\tsetTimeout(() => tooltip.style.opacity = 1);\n      tooltip.style.top = `${event.pageY}px`;\n      tooltip.style.left = `${event.pageX}px`;\n\t\t}\n\n\t\tfunction remove() {\n\t\t\ttooltip.remove();\n\t\t}\n\n\t\tnode.addEventListener('mouseenter', append);\n\t\tnode.addEventListener('mouseleave', remove);\n\n\t\treturn {\n\t\t\tupdate(text) {\n\t\t\t\ttooltip.textContent = text;\n\t\t\t\tposition();\n\t\t\t},\n\n\t\t\tdestroy() {\n\t\t\t\ttooltip.remove();\n\t\t\t\tnode.removeEventListener('mouseenter', append);\n\t\t\t\tnode.removeEventListener('mouseleave', remove);\n\t\t\t}\n\t\t};\n\t}\n\n\n\n\n\n</script>\n\n<style>\n\n  @media screen and (min-width: 600px) {\n    line {\n      mix-blend-mode: multiply;\n    }\n}\n\n@media screen and (max-width: 600px) {\n  line {\n    opacity: 0.9;\n  }\n}\n\n\n\n\n</style>\n\n<div class=\"graphs\">\n  <p>{data.key}</p>\n\n<svg width ={width} height={height}>\n\n{#each albumData as d, di}\n<g on:click={()=>{spotifyUri = d.id; playing = d.songtitle;}} use:tooltip={d.songtitle} >\n  <line x1={midPoint.x} x2={midPoint.x} y1={circleEdge} y2={circleEdge-d.duration_ms/3000} stroke-width=\"2\" stroke=\"#A0A0A0\" transform=\"rotate({di/albumData.length * 360} {midPoint.x} {midPoint.y})\"></line>\n  {#each qualities as q, qi}\n  <line x1={midPoint.x - d[q.id]*25} x2={midPoint.x + d[q.id]*25} y1={0.9*circleEdge -qi/6 * 3 * d.duration_ms/10000} y2={0.9*circleEdge -qi/6 * 3 * d.duration_ms/10000} stroke-width={d[q.id]*20} stroke={q.color} transform=\"rotate({di/albumData.length * 360} {midPoint.x} {midPoint.y})\"></line>\n  {/each}\n  </g>\n{/each}\n\n<defs>\n    <clipPath id=\"img-{data.values[0].id}\">\n        <circle cx={midPoint.x} cy={midPoint.y} r={r}></circle>\n    </clipPath>\n </defs>\n\n <image width={r*2} height={r*2} x={midPoint.x-r} y={midPoint.y-r} xlink:href=\"img/{data.values[0].slug}.png\" clip-path=\"url(#img-{data.values[0].id}\" />\n\n\n</svg>\n</div>\n"
  ],
  "names": [],
  "mappings": "AAoCE,OAAO,cAAC,CAAC,AACP,KAAK,CAAE,IAAI,CACX,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,GAAG,CAAC,GAAG,AAClB,CAAC,AAED,SAAS,cAAC,CAAC,AACT,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,KAAK,AACpB,CAAC,AAED,OAAO,cAAC,CAAC,AACP,KAAK,CAAE,IAAI,CACX,gBAAgB,CAAE,OAAO,CACzB,QAAQ,CAAE,cAAc,CACxB,QAAQ,CAAE,MAAM,CAChB,GAAG,CAAE,CAAC,CACN,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,YAAY,CAC7B,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,KAAK,AACf,CAAC,AAED,IAAI,cAAC,CAAC,AACJ,KAAK,CAAE,GAAG,CACV,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,eAAe,CAAE,YAAY,CAC7B,UAAU,CAAE,MAAM,AACpB,CAAC,AAED,QAAQ,cAAC,CAAC,AACR,OAAO,CAAE,WAAW,CACpB,WAAW,CAAE,QAAQ,CACrB,SAAS,CAAE,MAAM,AACnB,CAAC,AAED,sBAAQ,CAAG,cAAE,CAAC,AACZ,YAAY,CAAE,GAAG,AACnB,CAAC,AAED,OAAO,MAAM,CAAC,GAAG,CAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACpC,IAAI,cAAC,CAAC,AACJ,cAAc,CAAE,QAAQ,AAC1B,CAAC,AACH,CAAC,AAED,OAAO,MAAM,CAAC,GAAG,CAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACpC,IAAI,cAAC,CAAC,AACJ,OAAO,CAAE,GAAG,AACd,CAAC,AACH,CAAC,AAED,cAAc,cAAC,CAAC,AACd,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,eAAe,CAAE,YAAY,CAC7B,UAAU,CAAE,MAAM,CAClB,aAAa,CAAE,KAAK,AACtB,CAAC,AAED,aAAa,cAAC,CAAC,AACb,QAAQ,CAAE,KAAK,CACf,IAAI,CAAE,GAAG,CACT,MAAM,CAAE,GAAG,CACX,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACb,CAAC,AAED,2BAAa,CAAC,CAAC,cAAC,CAAC,AACf,SAAS,CAAE,KAAK,AAClB,CAAC;ACzCD,OAAO,MAAM,CAAC,GAAG,CAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACpC,IAAI,cAAC,CAAC,AACJ,cAAc,CAAE,QAAQ,AAC1B,CAAC,AACL,CAAC,AAED,OAAO,MAAM,CAAC,GAAG,CAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACpC,IAAI,cAAC,CAAC,AACJ,OAAO,CAAE,GAAG,AACd,CAAC,AACH,CAAC"
}